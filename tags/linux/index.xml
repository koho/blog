<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on Xhat Blog</title><link>https://xhat.org/tags/linux/</link><description>Recent content in Linux on Xhat Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 05 Dec 2022 00:19:04 +0800</lastBuildDate><atom:link href="https://xhat.org/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>为 NGINX 签发 HTTPS 证书</title><link>https://xhat.org/posts/issue-nginx-cert/</link><pubDate>Mon, 05 Dec 2022 00:19:04 +0800</pubDate><guid>https://xhat.org/posts/issue-nginx-cert/</guid><description>目前有很多 CA 可以免费签发 3 个月的 HTTPS 证书，如 Let&amp;rsquo;s Encrypt，ZeroSSL 等。推荐使用 acme.sh 脚本来管理证书，可以简化签发流程，证书到期可以自动续签。
安装 curl https://get.acme.sh | sh Let&amp;rsquo;s Encrypt 域名验证方式有很多种，以阿里云的 DNS 认证为例：
export Ali_Key=&amp;#34;&amp;#34; export Ali_Secret=&amp;#34;&amp;#34; 签发指定域名证书：
/root/.acme.sh/acme.sh --server letsencrypt --issue --dns dns_ali -d a.example.com 成功后会输出证书保存目录，而且脚本在证书到期前会自动续签证书。
安装证书到指定目录：
/root/.acme.sh/acme.sh --install-cert -d a.example.com --fullchain-file /etc/a.example.com.cer --key-file /etc/a.example.com.key --reloadcmd &amp;#34;systemctl restart nginx&amp;#34; 当证书续签后，上面的安装命令也会再次执行。
Nginx 配置 server { listen 443 ssl http2; listen [::]:443 ssl http2; ssl_certificate /etc/a.example.com.cer; ssl_certificate_key /etc/a.example.com.key; ssl_protocols TLSv1.3 TLSv1.2; server_name a.</description></item><item><title>Linux 部署 Nginx</title><link>https://xhat.org/posts/linux-nginx-deploy/</link><pubDate>Tue, 14 Dec 2021 00:09:32 +0800</pubDate><guid>https://xhat.org/posts/linux-nginx-deploy/</guid><description>安装 参考官网的安装文档。
静态网站 # 强制跳转HTTPS server { listen 80; server_name example.com; return 301 https://$http_host$request_uri; } server { listen 443 ssl http2; ssl_certificate /etc/example.com.crt; ssl_certificate_key /etc/example.com.key; ssl_protocols TLSv1.3 TLSv1.2; server_name example.com; #access_log /var/log/nginx/host.access.log main; location / { root /usr/share/app/html; index index.html index.htm; } #error_page 404 /404.html; error_page 497 https://$http_host$request_uri; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } } 代理网站 server{ listen 8888 ssl http2; listen [::]:8888 ssl http2; ssl_certificate /etc/example.</description></item><item><title>Linux 部署 WireGuard</title><link>https://xhat.org/posts/linux-wireguard/</link><pubDate>Fri, 03 Sep 2021 14:33:27 +0800</pubDate><guid>https://xhat.org/posts/linux-wireguard/</guid><description>安装 CentOS sudo yum install epel-release elrepo-release sudo yum install yum-plugin-elrepo sudo yum install kmod-wireguard wireguard-tools Ubuntu sudo apt install wireguard 若内核太老不想升级，可以使用 wireguard-go 代替。
配置 创建 Wireguard 目录： mkdir /etc/wireguard/ cd /etc/wireguard/ 生成密钥对 wg genkey | tee privatekey | wg pubkey &amp;gt; publickey 编辑配置文件 vi wg0.conf 内容模板：
[Interface] Address = 10.100.100.3/32 PrivateKey = KEY ListenPort = 21841 PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE [Peer] PublicKey = PUB Endpoint = IP AllowedIPs = 10.</description></item></channel></rss>