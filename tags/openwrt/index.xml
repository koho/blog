<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenWrt on xhat's Blog</title><link>https://xhat.org/tags/openwrt/</link><description>Recent content in OpenWrt on xhat's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 06 Feb 2021 14:00:28 +0800</lastBuildDate><atom:link href="https://xhat.org/tags/openwrt/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenWrt + Pon Stick 配置教程</title><link>https://xhat.org/posts/openwrt-pon-stick/</link><pubDate>Sat, 06 Feb 2021 14:00:28 +0800</pubDate><guid>https://xhat.org/posts/openwrt-pon-stick/</guid><description>0x1 配置访问模块 首先确定模块插在哪个接口，本例中模块接在eth1上。确定模块IP，本例为192.168.1.1。下面配置一个接口，使内网的机器能直接访问模块。
若OpenWrt的地址也是192.168.1.1，需要修改地址： 在网络-&amp;gt;接口页面，编辑LAN接口，把IP地址改为172.20.0.1(其他网段亦可)。
新建一个接口，名字为PON，协议为静态IP，接口为eth1。 配置IP地址为192.168.1.2，子网掩码为255.255.255.252.
在防火墙设置选项卡里选择分配给wan，
后续就可以访问模块地址进行配置，请参考模块配置教程。
0x2 拨号 这部分已经假定模块已经配置完成，并完成光路认证。还需要确定VLAN ID，一般在光猫的后台可以看到：
在上网的连接名称可以看到后面的VID_41，41就是上网的VLAN ID。
回到OpenWrt页面，编辑WAN接口(没有的新建一个)，协议选择PPPoE，用户名密码照常输入，防火墙分配给wan. 要注意的是在物理设置选择接口那里，下拉到最后，在自定义输入框里输入eth1.41, eth1是模块所在的接口，41是上面的上网VLAN ID。
后续应该就可以正常拨号上网了。</description></item><item><title>OpenWrt 网关抓包</title><link>https://xhat.org/posts/openwrt-trafficdump/</link><pubDate>Fri, 08 Jan 2021 11:26:10 +0800</pubDate><guid>https://xhat.org/posts/openwrt-trafficdump/</guid><description>把 WireShark 添加到环境变量 OpenWrt 安装 tcpdump 执行命令:
ssh root@openwrt tcpdump -s 0 -U -n -w - -i eth1 not port 22 | wireshark -k -i - 注意将eth1替换为你实际需要捕获的接口。</description></item></channel></rss>